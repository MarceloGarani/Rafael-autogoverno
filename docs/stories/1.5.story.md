# Story 1.5: Mentee Home Screen

**Epic:** 1 â€” Foundation & Authentication
**Status:** Draft
**Priority:** Critical Path
**Story Type:** Frontend + API

---

## Executor Assignment

executor: "@dev"
quality_gate: "@architect"
quality_gate_tools: ["architecture-review", "code-standards"]

---

## Story Statement

> As a mentee,
> I want to see a personalized home screen with my streak and a clear call-to-action,
> so that I'm motivated to register my day.

---

## Acceptance Criteria

- [ ] **AC1:** SaudaÃ§Ã£o contextual: "Bom dia/Boa tarde/Boa noite, {nome}" baseada no horÃ¡rio local
- [ ] **AC2:** CTA principal "Registrar o dia" como card/botÃ£o grande e visualmente destacado (vermelho #E53935)
- [ ] **AC3:** Streak counter exibindo dias consecutivos de registro (ex: "ðŸ”¥ 7 dias consecutivos") â€” 0 se nunca registrou
- [ ] **AC4:** Mini-resumo semanal: barra visual mostrando intensidade emocional dos Ãºltimos 7 dias (cores verdeâ†’amareloâ†’vermelho)
- [ ] **AC5:** Links rÃ¡pidos: "Meu histÃ³rico" e "Ãšltimo relatÃ³rio" (links funcionais, pÃ¡ginas podem estar vazias)
- [ ] **AC6:** Dados carregados do Supabase via Server Components
- [ ] **AC7:** Estado vazio tratado: se nÃ£o hÃ¡ registros, exibir mensagem de boas-vindas e CTA para primeiro registro
- [ ] **AC8:** PÃ¡gina renderiza corretamente em mobile (â‰¤ 480px) e desktop

---

## Dev Notes

### Wireframe â€” Mentee Home
[Source: docs/architecture/wireframes-mvp-phase1.md#3-mentee-home]
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         max-w: 400px           â”‚
â”‚                                â”‚
â”‚  Boa noite, Marcelo.           â”‚
â”‚  Como foi seu dia?             â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  ðŸ”¥ 12 dias             â”‚    â”‚
â”‚  â”‚  â— â— â— â— â—‹ â— â—        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚    REGISTRAR O DIA     â”‚    â”‚
â”‚  â”‚     (#E53935 bg)       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”‚  Resumo da semana              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  â–‚ â–… â–ƒ â–‡ _ â–„ â–†        â”‚    â”‚
â”‚  â”‚  S  T  Q  Q  S  S  D  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                â”‚
â”‚  â†’ Meu historico               â”‚
â”‚  â†’ Ultimo relatorio            â”‚
â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ðŸ     ðŸ“‹    ðŸ“ˆ    ðŸ‘¤      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Map
[Source: docs/architecture/wireframes-mvp-phase1.md#3-mentee-home]
- `ContextualGreeting` â€” Time-of-day based greeting + user name
- `StreakCounter` â€” Fire emoji + consecutive days count + weekly dots (filled/empty)
- `Button` (CTA) â€” "Registrar o dia" â€” full-width, bg #E53935, large padding, rounded
- `WeeklyIntensityBar` â€” 7 bars with intensity-based colors (greenâ†’yellowâ†’red), day labels
- `QuickLinks` â€” Text links to `/history` and `/reports`

### Data Requirements
- User name: from `users` table (Server Component)
- Streak: via `get_user_streak()` RPC function
- Weekly intensity: last 7 `daily_entries` ordered by date
- Empty state: check if user has any entries

### API Endpoints
[Source: docs/architecture.md#api-specification]
- `GET /api/progress/streak` â€” returns `{ current_streak, max_streak }`
- Home data loaded via Server Components + direct Supabase queries (no API route needed for initial load)

### Intensity Color Scale
[Source: docs/architecture/design-system.md#color-system]
- 1-3: Green (#4CAF50)
- 4-6: Yellow (#FFC107)
- 7-10: Red (#E53935)

### File Locations
- Page: `packages/web/src/app/(mentee)/page.tsx` (Server Component)
- Components: `packages/web/src/components/layout/StreakCounter.tsx`, `WeeklyIntensityBar.tsx`
- Hook: `packages/web/src/hooks/use-streak.ts`

---

## Tasks / Subtasks

- [ ] **Task 1** (AC: 1): Create `ContextualGreeting` component â€” greeting based on hour (6-12: Bom dia, 12-18: Boa tarde, 18+: Boa noite) + user name from session
- [ ] **Task 2** (AC: 3): Create `StreakCounter` component â€” fire emoji + `{n} dias consecutivos` + 7 weekly dots (filled if entry exists, empty if not)
- [ ] **Task 3** (AC: 2): Create CTA "Registrar o dia" button â€” full-width, bg #E53935, links to `/entry/new`, large touch target
- [ ] **Task 4** (AC: 4): Create `WeeklyIntensityBar` component â€” 7 vertical bars with intensity-mapped colors, day-of-week labels
- [ ] **Task 5** (AC: 5): Create quick links section â€” "Meu histÃ³rico" â†’ `/history`, "Ãšltimo relatÃ³rio" â†’ `/reports`
- [ ] **Task 6** (AC: 6): Create mentee home page as Server Component â€” load user data, streak, and last 7 entries from Supabase
- [ ] **Task 7** (AC: 7): Implement empty state â€” welcome message "Bem-vindo ao DiÃ¡rio de Autogoverno!" + CTA for first entry
- [ ] **Task 8** (AC: 8): Ensure responsive layout â€” max-w 400px on mobile, centered on desktop
- [ ] **Task 9**: Write unit tests for StreakCounter, WeeklyIntensityBar, and ContextualGreeting

---

## CodeRabbit Integration

> **CodeRabbit Integration**: Disabled

---

## File List

_To be updated during implementation._

---

## Dev Agent Record

_To be filled by @dev during implementation._

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-27 | 1.0 | Story drafted | @sm |

---

## QA Results

_To be filled by @qa during review._
