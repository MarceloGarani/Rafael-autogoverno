# Squad Design Blueprint — Diário de Autogoverno
# Generated by @squad-creator (Craft) via *design-squad
# Source: diario-autogoverno-briefing.md + docs/prd.md

squad:
  name: diario-autogoverno
  description: "Squad para o Diário de Autogoverno — web app de registro emocional diário para advogados mentorados, com reflexões IA baseadas no Código A.D.V."
  domain: emotional-self-governance-journal
  version: "1.0.0"

analysis:
  entities:
    - User (mentee, mentor)
    - DailyEntry
    - AIReflection
    - WeeklyReport
    - MentorNote
    - SessionBriefing
    - Badge
    - Streak
  workflows:
    - auth-onboarding
    - daily-entry-flow
    - weekly-report-generation
    - mentor-dashboard
    - mentee-profile-review
    - pre-session-briefing
    - mentor-practitioner-switch
    - engagement-gamification
    - evolution-charts
  integrations:
    - name: Supabase
      purpose: PostgreSQL database, Auth, RLS
    - name: Anthropic Claude API
      purpose: AI reflections, weekly reports, session briefings, pattern identification
    - name: Vercel
      purpose: Deployment, Cron Jobs for scheduled reports
    - name: Resend
      purpose: Email reminders for daily registration
    - name: PWA
      purpose: Service worker, manifest for mobile installation
  stakeholders:
    - name: Mentorado
      type: primary-user
      description: "Advogado mentorado por Rafael Coelho — registra situações diárias, recebe reflexões IA"
      platform: mobile-first
    - name: Mentor
      type: admin-user
      description: "Rafael Coelho — dual role: praticante (diário pessoal privado) e mentor (dashboard de todos os mentorados)"
      platform: desktop-first

recommendations:
  agents:
    - id: entry-manager
      role: "Gerencia o fluxo completo de registro diário: stepper 3 steps, validação, persistência e integração com reflexão IA"
      commands:
        - "*create-entry"
        - "*list-entries"
        - "*get-entry"
        - "*filter-entries"
      confidence: 0.95
      user_added: false
      user_modified: false

    - id: ai-reflection
      role: "Orquestra todas as interações com Claude API: gera reflexões pós-registro, relatórios semanais, briefings de sessão e identificação de padrões — sempre no tom do Código A.D.V."
      commands:
        - "*generate-reflection"
        - "*generate-weekly-report"
        - "*generate-briefing"
        - "*identify-patterns"
      confidence: 0.93
      user_added: false
      user_modified: false

    - id: mentor-dashboard
      role: "Gerencia o dashboard do mentor: visão geral, lista de mentorados com status, alertas de inatividade, insights agregados e switch mentor/praticante"
      commands:
        - "*dashboard-overview"
        - "*list-mentees"
        - "*mentee-status"
        - "*group-insights"
        - "*switch-context"
      confidence: 0.92
      user_added: false
      user_modified: false

    - id: mentee-profile
      role: "Gerencia o perfil individual do mentorado no contexto do mentor: timeline de registros, gráficos de evolução, relatórios, padrões IA e notas do mentor"
      commands:
        - "*view-profile"
        - "*mentee-evolution"
        - "*mentee-reports"
        - "*mentee-patterns"
        - "*manage-notes"
      confidence: 0.90
      user_added: false
      user_modified: false

    - id: engagement
      role: "Gerencia gamificação e retenção: cálculo de streaks, concessão de badges, lembretes por email, e métricas de progresso pessoal"
      commands:
        - "*calculate-streak"
        - "*check-badges"
        - "*send-reminder"
        - "*progress-summary"
      confidence: 0.88
      user_added: false
      user_modified: false

  tasks:
    # entry-manager tasks
    - name: create-entry
      agent: entry-manager
      entrada:
        - user_id
        - situation (text, min 10 chars)
        - category (audiencia|negociacao|cliente|cobranca|equipe|decisao|outro)
        - emotion (ansiedade|raiva|medo|frustracao|inseguranca|culpa|outro)
        - intensity (1-10)
        - reaction (text, min 10 chars)
        - self_perception (reactive|strategic|unsure)
      saida:
        - entry_id
        - status
        - created_at
      confidence: 0.95

    - name: list-entries
      agent: entry-manager
      entrada:
        - user_id
        - filters (period, category, emotion)
        - pagination (page, limit)
      saida:
        - entries[]
        - total_count
      confidence: 0.92

    - name: get-entry
      agent: entry-manager
      entrada:
        - entry_id
        - user_id
      saida:
        - entry (full details + ai_reflection + answers)
      confidence: 0.90

    - name: validate-entry
      agent: entry-manager
      entrada:
        - entry_data
      saida:
        - validation_result
        - errors[]
      confidence: 0.88

    # ai-reflection tasks
    - name: generate-reflection
      agent: ai-reflection
      entrada:
        - entry_id
        - entry_data (situation, category, emotion, intensity, reaction, self_perception)
        - user_history (optional, recent entries for pattern detection)
      saida:
        - questions[] (2-3 reflective questions)
        - reflection_id
      confidence: 0.95

    - name: save-reflection-answers
      agent: ai-reflection
      entrada:
        - reflection_id
        - answers[] (nullable)
      saida:
        - updated_reflection
      confidence: 0.88

    - name: generate-weekly-report
      agent: ai-reflection
      entrada:
        - user_id
        - week_start
        - week_end
        - entries[] (week's entries)
      saida:
        - report (summary, patterns, evolution, insight, challenge)
        - report_id
      confidence: 0.93

    - name: generate-briefing
      agent: ai-reflection
      entrada:
        - mentor_id
        - mentee_id
        - last_session_date
        - mentor_notes (previous notes)
      saida:
        - briefing (summary, patterns, attention_points, suggested_topics, questions)
        - briefing_id
      confidence: 0.91

    - name: identify-patterns
      agent: ai-reflection
      entrada:
        - user_id
        - entries[] (full history)
      saida:
        - patterns[] (description, confidence, connected_adv_pillar)
      confidence: 0.87

    # mentor-dashboard tasks
    - name: dashboard-overview
      agent: mentor-dashboard
      entrada:
        - mentor_id
      saida:
        - active_mentees (count)
        - weekly_entries (count)
        - avg_engagement (percentage)
        - alerts[] (inactive mentees)
      confidence: 0.93

    - name: list-mentees
      agent: mentor-dashboard
      entrada:
        - mentor_id
        - filters (status, search_query)
      saida:
        - mentees[] (name, last_entry, streak, avg_intensity, status)
      confidence: 0.92

    - name: mentee-alerts
      agent: mentor-dashboard
      entrada:
        - mentor_id
        - threshold_days (default 3)
      saida:
        - alerts[] (mentee_name, days_inactive, last_entry_date)
      confidence: 0.90

    - name: group-insights
      agent: mentor-dashboard
      entrada:
        - mentor_id
        - period (week|month)
      saida:
        - top_emotions[] (emotion, count, percentage)
        - challenging_categories[] (category, percentage)
        - avg_intensity_trend (current vs previous)
        - reactive_vs_strategic (ratio, trend)
      confidence: 0.89

    # mentee-profile tasks
    - name: view-profile
      agent: mentee-profile
      entrada:
        - mentor_id
        - mentee_id
      saida:
        - mentee_info (name, email, start_date)
        - stats (current_streak, longest_streak, total_entries)
      confidence: 0.91

    - name: mentee-evolution
      agent: mentee-profile
      entrada:
        - mentee_id
        - period (month|3months|all)
      saida:
        - intensity_timeline[] (week, avg_intensity)
        - category_distribution[] (category, count, percentage)
        - reactive_strategic_ratio[] (month, reactive_pct, strategic_pct)
      confidence: 0.90

    - name: mentee-reports
      agent: mentee-profile
      entrada:
        - mentee_id
      saida:
        - weekly_reports[] (id, week_start, week_end, summary_preview)
      confidence: 0.89

    - name: manage-notes
      agent: mentee-profile
      entrada:
        - mentor_id
        - mentee_id
        - content (text)
      saida:
        - note_id
        - updated_at
      confidence: 0.92

    # engagement tasks
    - name: calculate-streak
      agent: engagement
      entrada:
        - user_id
      saida:
        - current_streak (days)
        - longest_streak (days)
        - last_entry_date
      confidence: 0.93

    - name: check-badges
      agent: engagement
      entrada:
        - user_id
        - current_streak
        - total_entries
      saida:
        - new_badges[] (badge_type, earned_at)
        - all_badges[] (badge_type, earned_at)
      confidence: 0.88

    - name: send-reminder
      agent: engagement
      entrada:
        - users_without_entry_today[] (user_id, name, email)
      saida:
        - sent_count
        - failed[] (user_id, error)
      confidence: 0.85

    - name: progress-summary
      agent: engagement
      entrada:
        - user_id
        - period (month|3months|all)
      saida:
        - streak_info (current, longest)
        - badges[] (type, earned_at)
        - intensity_trend (direction, magnitude)
        - reactive_ratio_trend (direction, current_pct)
      confidence: 0.87

  template: basic
  config_mode: extend

metadata:
  created_at: "2026-02-27T09:00:00Z"
  source_docs:
    - "./diario-autogoverno-briefing.md"
    - "./docs/prd.md"
  user_adjustments: 0
  overall_confidence: 0.91
  designed_by: "@squad-creator (Craft)"
  aios_version: "4.4.6"
